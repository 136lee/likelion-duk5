<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="chat"></div>
<input id="msg" placeholder="ë©”ì‹œì§€ ì…ë ¥..." />
<button onclick="send()">ë³´ë‚´ê¸°</button>
<script>
async function send(){
  const msgEl = document.getElementById("msg");
  const chat = document.getElementById("chat");
  const msg = msgEl.value.trim();
  if(!msg) return;

  // ì‚¬ìš©ìê°€ ë³´ë‚¸ ë©”ì‹œì§€ ë¨¼ì € í‘œì‹œ
  chat.insertAdjacentHTML("beforeend", `<div>ğŸ‘¤: ${msg}</div>`);
  msgEl.value = "";

  try {
    const res = await fetch("{% url 'explore:chat_api' %}", {
      method:"POST",
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({message: msg})
    });
    const data = await res.json();
    chat.insertAdjacentHTML(
      "beforeend",
      `<div>ğŸ¤–: ${data.reply ?? ("ì—ëŸ¬: " + (data.error || res.status))}</div>`
    );
  } catch(e){
    chat.insertAdjacentHTML("beforeend", `<div style="color:red">ìš”ì²­ ì‹¤íŒ¨: ${e}</div>`);
  }
}
</script>

</body>
</html>
