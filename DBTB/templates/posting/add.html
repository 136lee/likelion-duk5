{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/account/add.css' %}" />
    <title>posting</title>
  </head>
  <body>
    <section>
      <!-- 지도로 이동 -->
      <a id="postcont" href="{% url 'map:list' %}">
        <img src="{% static 'img/chevron-left.svg'%}" />
        <p>지도</p>
      </a>
      <div id="postcontmi">
        <!-- 마이로 이동 -->
        <a href="{% url 'account:mypage' %}">
          <img id="postpf" src="{% static 'img/profile.svg'%}" />
        </a>
        <div>
          <p id="usid">봉봉봉</p>
          <p id="usst">AI 작업 실행 중</p>
        </div>
      </div>
      <form method="POST" action="{% url 'post:create' %}" enctype="multipart/form-data">
            {% csrf_token %}
                <!-- 지도에서 전달된 좌표/복귀 경로를 그대로 POST로 넘긴다 -->
<input type="hidden" name="latitude"  value="{{ request.GET.lat }}">
<input type="hidden" name="longitude" value="{{ request.GET.lng }}">
<input type="hidden" name="next" value="{% if request.GET.next %}{{ request.GET.next }}{% else %}{% url 'map:list' %}{% endif %}">
      <article id="PTcontt">
        <div>
          <div id="aicon">
                <div id="addPtCon">
      <input type="file" id="fileUpload" name="image" accept="image/*" hidden />
      <label for="fileUpload" class="add-btn">
        <img src="{% static 'img/circle-plus.svg'%}" />
        <p>사진 등록하기</p>
      </label>
    </div>
            <img id="adpts" src="{% static 'img/IMG_0575 2.png'%}" />
            <div id="aiconEx">
              <div id="PlName">
                <input type="text"  name="title" required id="PlNameTi"></input>
                <p id="PlNameAd">서울특별시 도봉구 삼양로144길 33</p>
              </div>
              <div class="PtBox">
                <div>
                  <span class="PtBoxTT">AI 분위기 분석</span>
                  <div class="PtRe">
                    <img src="{% static 'img/refresh-ccw.svg'%}" />
                    <span>재생성</span>
                  </div>
                </div>
                <div class="PtLod" style="display: none">
                  <img src="{% static 'img/loader.svg' %}" />
                  <p>답변 생성 중...</p>
                </div>
                <div class="Pttextbox">
                  <ul>
                    <li>넓고 평탄한 초록 잔디</li>
                    <li>개방적이고 조용한 공간</li>
                    <li>배경의 산과 도심 빌딩</li>
                    <li>자연친화적, 청량감, 여유로움</li>
                  </ul>
                </div>
                <div class="PtBoxSy">
                  <div class="PtBoxSyGB">
                    <img src="{% static 'img/👍️ 올린 엄지.svg' %}" />
                    <span>이 답변 좋아요</span>
                  </div>
                  <div class="PtBoxSyGB">
                    <img src="{% static 'img/👎️ 내린 엄지.svg' %}" />
                    <span>이 답변 싫어요</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="PtBox">
            <span class="PtBoxTT">소개 한 줄</span>
            <div class="PtRe">
              <img src="{% static 'img/pencil.svg'%}" />
              <span>수정하기</span>
              <p style="display: none">답변 생성 중...</p>
            </div>
            <textarea name="content" class="Pttextbox">
              여름 아침 덕성여대. 잔디밭에 앉아서 산과 하늘을 바라보면 마음이 탁
              트여요!
            </textarea>
          </div>
              <!-- 결과 박스 -->
    <div id="aiPhotoBox" style="display:none; margin-top:8px; border:1px solid #eee; border-radius:10px; padding:10px;">
      <div id="aiPhotoLoading" style="color:#666;">AI가 사진을 분석하는 중…</div>
      <div id="aiPhotoResult" style="display:none;">
        <div><b>분위기</b>: <span id="aiMood"></span> <span id="aiEmojis"></span></div>
        <div style="margin-top:6px;"><b>요약</b>: <span id="aiSummary"></span></div>
        <div style="margin-top:6px;"><b>태그</b>: <span id="aiTags"></span></div>
        <button type="button" id="aiApply" style="margin-top:8px;">본문에 반영</button>
      </div>
    </div>
        </div>
      </article>
      <div id="csubcon">
        <!-- 이동태그 추가 -->
        <a href="{% url 'map:list' %}" id="csubcona"> 취소 </a>
        <input type="submit" id="csubconBt" type="button">등록하기</input>
      </div>
      </form>
    </section>
    <footer id="AcFooter">
      <div id="FtLogo">
        <img src="{% static '' %}" alt="로고" />
        <p>도봉또봉</p>
      </div>
      <div id="FtAd">
        <p id="FtAdC1">개인정보처리방침</p>
        <p id="FtAdC2">ⓒ 2025 AAA. All rights reserved.</p>
      </div>
    </footer>
      <!-- ✅ JS가 읽을 엔드포인트 값을 템플릿에서 주입 -->
  <input type="hidden" id="ai-photo-url" value="{% url 'post:ai_photo' %}">

  <!-- ✅ 외부 스크립트 로드 -->
  <script src="{% static 'post/create.js' %}"></script>
  </body>
</html>
